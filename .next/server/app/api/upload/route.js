(()=>{var e={};e.id=413,e.ids=[413],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},2282:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>m,serverHooks:()=>v,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>g});var o=t(2706),a=t(8203),i=t(5994),u=t(9187);let p=require("fs/promises");var n=t(3873),l=t.n(n);let d=["image/jpeg","image/png","image/webp","image/gif"],c=["video/mp4","video/webm","video/quicktime"];async function g(e){try{let r=await e.formData(),t=r.getAll("files"),s=r.get("file");if(s&&0===t.length&&t.push(s),0===t.length)return u.NextResponse.json({success:!1,error:"No files uploaded"},{status:400});let o=[];for(let e of t){let r=d.includes(e.type),t=c.includes(e.type);if(!r&&!t)continue;let s=await e.arrayBuffer(),a=Buffer.from(s),i=Date.now(),u=Math.random().toString(36).substring(2,8),n=e.name.split(".").pop()?.toLowerCase()||(r?"jpg":"mp4"),g=`product_${i}_${u}.${n}`,m=l().join(process.cwd(),"public","uploads");try{await (0,p.mkdir)(m,{recursive:!0})}catch{}let f=l().join(m,g);await (0,p.writeFile)(f,a);let x=`/uploads/${g}`;o.push({type:r?"image":"video",url:x})}if(0===o.length)return u.NextResponse.json({success:!1,error:"No valid files uploaded. Supported: JPEG, PNG, WebP, GIF, MP4, WebM, MOV"},{status:400});return u.NextResponse.json({success:!0,imageUrl:o[0]?.url,media:o})}catch(e){return console.error("Error uploading file:",e),u.NextResponse.json({success:!1,error:"Failed to upload file"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\Monster\\OneDrive\\Masa\xfcst\xfc\\Basketball\\src\\app\\api\\upload\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:v}=m;function h(){return(0,i.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,452],()=>t(2282));module.exports=s})();