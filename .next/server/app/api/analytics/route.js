(()=>{var e={};e.id=70,e.ids=[70],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},1281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>k,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{GET:()=>w,POST:()=>y});var a=r(2706),i=r(8203),n=r(5994),o=r(9187),c=r(9021),u=r(3873);let p=r.n(u)().join(process.cwd(),"src","data","analytics.json");async function l(){try{let e=await c.promises.readFile(p,"utf8");return JSON.parse(e)}catch{return{purchaseClicks:0,productViews:{},dailyStats:[]}}}async function d(e){await c.promises.writeFile(p,JSON.stringify(e,null,2),"utf8")}async function w(){try{let e=await l(),t=Object.entries(e.productViews).sort(([,e],[,t])=>t-e).slice(0,10);return o.NextResponse.json({success:!0,purchaseClicks:e.purchaseClicks,productViews:e.productViews,topProducts:t,dailyStats:e.dailyStats.slice(-30)})}catch(e){return console.error("Error reading analytics:",e),o.NextResponse.json({success:!1,error:"Failed to read analytics"},{status:500})}}async function y(e){try{let{type:t,productId:r,productName:s}=await e.json(),a=await l(),i=new Date().toISOString().split("T")[0],n=a.dailyStats.find(e=>e.date===i);if(n||(n={date:i,purchases:0,views:0},a.dailyStats.push(n)),"purchase"===t)a.purchaseClicks++,n.purchases++;else if("view"===t&&r){let e=`${r}_${s||"Unknown"}`;a.productViews[e]=(a.productViews[e]||0)+1,n.views++}return await d(a),o.NextResponse.json({success:!0})}catch(e){return console.error("Error tracking event:",e),o.NextResponse.json({success:!1,error:"Failed to track event"},{status:500})}}let x=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/analytics/route",pathname:"/api/analytics",filename:"route",bundlePath:"app/api/analytics/route"},resolvedPagePath:"C:\\Users\\Monster\\OneDrive\\Masa\xfcst\xfc\\Basketball\\src\\app\\api\\analytics\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:h,workUnitAsyncStorage:v,serverHooks:f}=x;function k(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:v})}},6487:()=>{},8335:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452],()=>r(1281));module.exports=s})();